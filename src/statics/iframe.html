<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">

    <title>Kano IFrame integration</title>
    <link rel="shortcut icon" type="image/x-icon" href="statics/kano-icon-64x64.png">
    <script src="./post-robot.min.js"></script>
    <script>
      var layerIsShown = false
      function toggleLayer(name) {
        postRobot.send(kano.contentWindow, 'map', { command: (layerIsShown ? 'hideLayer' : 'showLayer'), args: name })
        .then(function () {
          layerIsShown = !layerIsShown
          if (layerIsShown) postRobot.send(kano.contentWindow, 'map', { command: 'zoomToLayer', args: name })
        })
      }
      function toggleBackground() {
        postRobot.send(kano.contentWindow, 'map', { command: 'isLayerVisible', args: 'Sentinel 2' })
        .then(function (result) {
          // Switch between Satellite/OSM
          postRobot.send(kano.contentWindow, 'map', { command: 'showLayer', args: (result.data ? 'OSM Bright' : 'Sentinel 2') })
          postRobot.send(kano.contentWindow, 'map', { command: 'hideLayer', args: (!result.data ? 'OSM Bright' : 'Sentinel 2') })
        })
      }
    </script>
  </head>
  <body style="background-color: grey">
    <table style="margin-left:auto;margin-right:auto;">
      <thead>
        <tr><th colspan="2"><h1>Kano IFrame Integration Sample</h1></th></tr>
      </thead>
      <tbody>
      <tr>
        <td style="text-align:center;">
          <button type="button" onclick="toggleBackground()">Switch background</button></br>
          <button type="button" onclick="toggleLayer('Airports')">Switch airports</button>
        </td>
        <td>
          <iframe id="kano" title="Kano" allow="geolocation *" style="width: 1024px; height: 768px;" src="http://localhost:8080/">
          </iframe>
        </td>
      </tr>
      </tbody>
    </table>
    <script>
      var kano = document.getElementById('kano')
      /*
      setTimeout(function () {
        postRobot.send(kano.contentWindow, 'getLayer', { name: 'Airports' })
        .then(function(event) {
          var layer = event.data
          layer.show()
        })
      }, 5000)
      */
    </script>
  </body>
</html>
